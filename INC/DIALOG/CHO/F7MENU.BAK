;f7menu.asm
F7Menu:

;смещение на таблицу указателей вызываемого из меню кода
.pCodsTbl dd .CodsPtrsTbl

;смещение на таблицу текстовых строк соответствующих пунктам меню
.pStrTbl dd .StrsTbl

.cItems dd 7 ;число items пунктов меню (всего|total)

.SizeStr dd 27 ; size of 1 text string

.PosW dd 16 ; position of text window (*2)

.ActiveItem dd 1 ;текущая строка

.colorNotActivItem dd 7;цвет неактивных пунктов меню

.colorActivItem dd 23;цвет активных пунктов меню

.TipeOfMenu dd ACTION_MENU_TIPE;тип алгоритма меню

.StrsTbl:
db ' 1 - On|Off clock  ------- ',0
db ' 2 - On|Off word light --- ',0
db ' 3 - Delete empty lines -- ',0
db ' 4 - Replace word -------- ',0
db ' 5 - Go to end ----------- ',0
db ' 6 - Go to start --------- ',0
db ' 7 - Go to 50 % ---------- ',0


dw .dum ;действие по умолчанию
;-------------------------------------------------------------------------------
.CodsPtrsTbl:
dw .item1
dw .item2
dw .item3
dw .item4
dw .item5
dw .item6
dw .item7
dw .dum ;действие по умолчанию
dw .dum ;действие по умолчанию

;-------------------------------------------------------------------------------
.dum:
       ret
;--------

.item1:
call SwithClockOnOff
       ret
;----
.item2:
call SwithColorOnOff
       ret

;----

;----
.item3:
call DeleteEmptyLines ;inc/delline.asm
       ret

;----
;----
.item4:


.LZW_BUF = 1900h
.LZW_TMP = 30h

;Compress - compresses data using Lempel-Ziv Welch method.
; BX:AX - Pointer to temporary buffer (21K min.)
; DX:CX - Pointer to compressed data.
; DI:SI - Pointer to buffer to decompress.
; Exit: AX - size of compressed data.

;---------[1]
mov ax,word font_size
mov [DataSize],ax

push ds
pop ax

mov dx,ax
mov bx,ax
mov di,ax

mov cx,word Font
mov ax,buf+.LZW_TMP
mov si,buf+.LZW_BUF

push es
call LZWCompr
pop es

;---------[2]
;Decompress - decompresses data compressed by Lempel-Ziv Welch method.
; BX:AX - Pointer to temporary buffer (17K min.).
; DX:CX - Pointer to compressed data.
; DI:SI - Pointer to buffer to decompress.
; Exit: AX - size of decompressed data.


mov [DataSize],ax

push ds
pop ax

mov dx,ax
mov bx,ax
mov di,ax

mov si,word Font
mov ax,buf+.LZW_TMP
mov cx,buf+.LZW_BUF

push es
call LZWDecompr
pop es


       ret

;----
;----
.item5:
       ret

;----

;----
.item6:
       ret

;----

;----
.item7:
       ret

;----
;----
;item8:
;      ret

;----

;EOF
